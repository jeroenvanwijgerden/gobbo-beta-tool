<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="style/gobbo-code.css">
  <link rel="stylesheet" href="style/gobbo-terminal.css">
  <link rel="stylesheet" href="style/gobbo-lang.css">
  <link rel="stylesheet" href="style/hljs-sunburst.css">
  <style>
    :root {
      background-color: #222;
      color: #f0f0f0;
      font-family: Arial, Helvetica, sans-serif;

    }

    a {
      all: unset;
      cursor: pointer;
    }

    body {
      margin: 0;
      width: 100vw;
      height: 100vh;
      display: grid;
      grid-template-columns: 275px auto;
    }

    .toc {
      padding: 8px;
      background-color: #151515;
      white-space: nowrap;
      overflow: auto;
    }

    .toc> :not(:first-child) {
      margin-top: 8px;
    }

    .toc .numbering {
      margin-right: 1ch;
      font-weight: bold;
    }

    #content-container {
      overflow-y: auto;
    }

    #content {
      max-width: 65ch;
      margin: auto;
      line-height: 1.75;
    }

    div.image {
      width: max-content;
      max-width: 100%;
      margin: auto;
    }

    div.image img {
      display: block;
      margin: auto;
    }

    div.image .caption {
      font-size: 0.8em;
    }

    div.image .caption .numbering {
      font-weight: bold;
      margin-right: 1.5em;
    }

    a.link {
      color: #b0b0f0;
    }

    a.link:visited {
      color: #9090f0;
    }

    a.cross-reference {
      all: unset;
      cursor: pointer;
      color: pink;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      margin: 3rem -24px 1rem;
      padding: 0 24px 0;
      background-color: #223030;
    }

    h1 {
      font-size: 1.6rem;
    }

    h2 {
      font-size: 1.4rem;
    }

    h3 {
      font-size: 1.2rem;
    }

    h4,
    h5,
    h6 {
      font-size: 1rem;
    }


    h2 .numbering,
    h3 .numbering,
    h4 .numbering,
    h5 .numbering,
    h6 .numbering {
      margin-right: 1.2em;
    }

    p,
    ul,
    ol,
    table.code {
      margin-bottom: 1.5rem;
    }

    table {
      box-sizing: border-box;
      width: 100%;
      padding: 0px;
      border-collapse: collapse;
      border-spacing: 0px;
    }

    td {
      padding: 0px;
    }

    table.list td:first-child {
      width: 3ch;
      color: red;
    }

    code {
      font-family: "DejaVu Sans Mono", "Consolas", monospace;
    }

    code.inline {
      background-color: #181818;
      padding: 0.2em;
      font-size: 0.9em;
    }

    kbd.key {
      font-family: "DejaVu Sans Mono", "Consolas", monospace;
      padding: 0.2em;
      font-size: 0.8em;
      background-color: #ddd;
      color: black;
      border-radius: 0.3em;
      height: fit-content;
      margin-left: 0.2em;
      margin-right: 0.2em;
      width: 300px;
    }
  </style>
</head>

<body>
  <div class="toc"><div><a href="#gobbo-node-7c1a4b38-d9e9-4744-8a88-bc4ec808ea31"><span class="numbering">1</span><span>Introduction</span></a></div><div><a href="#gobbo-node-sec:getting-started"><span class="numbering">2</span><span>Getting started</span></a></div><div><a href="#gobbo-node-9b81ac52-fb3b-4e66-96ee-7fe0ef094d67"><span class="numbering">2.1</span><span>Initial setup</span></a></div><div><a href="#gobbo-node-section:directory"><span class="numbering">2.1.1</span><span>Directory</span></a></div><div><a href="#gobbo-node-683214c4-e4d2-4ff7-878d-2d8e2b77c74d"><span class="numbering">2.1.2</span><span>Text editor</span></a></div><div><a href="#gobbo-node-f0886ee5-a908-4be1-9006-231c5d7076c4"><span class="numbering">2.1.3</span><span>Runtime</span></a></div><div><a href="#gobbo-node-66e647a7-0c22-4bb2-bcc2-6c3afeba5463"><span class="numbering">2.1.4</span><span>Watcher</span></a></div><div><a href="#gobbo-node-af6eb711-ea7a-41d5-90b8-86e18915f456"><span class="numbering">2.1.5</span><span>Refresh tool</span></a></div><div><a href="#gobbo-node-c4454c2a-2400-4080-a69b-1f1c56ca3d74"><span class="numbering">2.2</span><span>Starting to write</span></a></div><div><a href="#gobbo-node-sec:writing"><span class="numbering">3</span><span>Writing</span></a></div><div><a href="#gobbo-node-a084257b-b193-448b-9af6-d9af64956560"><span class="numbering">3.1</span><span>Concepts</span></a></div><div><a href="#gobbo-node-e2823308-74fa-48ea-b3e7-5964b366a037"><span class="numbering">3.1.1</span><span>Text and paragraphs</span></a></div><div><a href="#gobbo-node-b7ec531b-69ef-424b-8bae-65cc9db8b70c"><span class="numbering">3.1.2</span><span>Nodes</span></a></div><div><a href="#gobbo-node-7b63d041-0d4e-4c2e-af0a-edbba89f2a02"><span class="numbering">3.1.3</span><span>Text and paragraph nodes</span></a></div><div><a href="#gobbo-node-5d4b8db1-293e-41cf-95fb-1b17b0c989b6"><span class="numbering">3.1.4</span><span>Escaping</span></a></div><div><a href="#gobbo-node-d32f85fc-227c-4b8a-ad1d-5306bc3e65a9"><span class="numbering">3.1.5</span><span>Comments</span></a></div><div><a href="#gobbo-node-sec:properties"><span class="numbering">3.1.6</span><span>Properties</span></a></div><div><a href="#gobbo-node-c65fdc3d-7b87-46d3-acc2-b5406f46f141"><span class="numbering">3.1.7</span><span>Global and child types</span></a></div><div><a href="#gobbo-node-sec:list-vs-map"><span class="numbering">3.1.8</span><span>Lists and maps</span></a></div><div><a href="#gobbo-node-7b2caaf2-3b90-4bb2-bd99-3a7cbac961a5"><span class="numbering">3.1.9</span><span>Preamble</span></a></div><div><a href="#gobbo-node-sec:preamble-val"><span class="numbering">3.1.9.1</span><span>Value</span></a></div><div><a href="#gobbo-node-006dbb42-24f4-4cfb-a8df-2a1d69d50d50"><span class="numbering">3.1.9.2</span><span>Content</span></a></div><div><a href="#gobbo-node-sec:preamble-cla"><span class="numbering">3.1.9.3</span><span>Class</span></a></div><div><a href="#gobbo-node-sec:preamble-def"><span class="numbering">3.1.9.4</span><span>Default</span></a></div><div><a href="#gobbo-node-sec:preamble-scope"><span class="numbering">3.1.9.5</span><span>Scope</span></a></div><div><a href="#gobbo-node-9b8e006b-6765-4e90-92f7-bbdbbbf31838"><span class="numbering">3.1.10</span><span>Macros</span></a></div><div><a href="#gobbo-node-sec:macro-val"><span class="numbering">3.1.10.1</span><span>Value</span></a></div><div><a href="#gobbo-node-sec:macro-con"><span class="numbering">3.1.10.2</span><span>Content</span></a></div><div><a href="#gobbo-node-sec:macro-preamble"><span class="numbering">3.1.10.3</span><span>Preamble</span></a></div><div><a href="#gobbo-node-sec:macro-include"><span class="numbering">3.1.10.4</span><span>Include</span></a></div><div><a href="#gobbo-node-590ed0de-c08d-4a2d-8b3f-54c1cfc0c260"><span class="numbering">3.1.10.5</span><span>Read</span></a></div><div><a href="#gobbo-node-2ea08578-20b5-4024-a5b9-9f55af867830"><span class="numbering">3.1.10.6</span><span>Lines</span></a></div><div><a href="#gobbo-node-bf111a09-2ca6-4281-8084-2bc44c36f3c1"><span class="numbering">3.1.10.7</span><span>Fallback</span></a></div><div><a href="#gobbo-node-472e5343-27e8-4087-b0a0-5a0570b65677"><span class="numbering">3.2</span><span>Nodes</span></a></div><div><a href="#gobbo-node-sec:node-text"><span class="numbering">3.2.1</span><span>Text</span></a></div><div><a href="#gobbo-node-sec:node-ref"><span class="numbering">3.2.2</span><span>Cross reference</span></a></div><div><a href="#gobbo-node-sec:node-list"><span class="numbering">3.2.3</span><span>List</span></a></div><div><a href="#gobbo-node-9fecc494-3766-4ebb-8ecd-b1688a5e595a"><span class="numbering">3.2.4</span><span>Code</span></a></div><div><a href="#gobbo-node-e66efc74-3f3f-4ff3-98df-af3870b0a7d6"><span class="numbering">3.2.5</span><span>Terminal</span></a></div><div><a href="#gobbo-node-d92c88e5-cf62-4b3d-b1fe-b1cfd792ee2b"><span class="numbering">4</span><span>The tool</span></a></div><div><a href="#gobbo-node-4efe35b1-2d1c-4ff6-99de-4643050f02ac"><span class="numbering">5</span><span>Footguns</span></a></div><div><a href="#gobbo-node-14d14629-e996-4f79-9261-9a903aef7615"><span class="numbering">6</span><span>Wrapping up</span></a></div><div><a href="#gobbo-node-09d2b80d-6b50-4ae2-b286-c88ab2f0ceac"><span class="numbering">7</span><span>Closing thoughts</span></a></div><div><a href="#gobbo-node-this-page-in-gobbo"><span class="numbering">A</span><span>This page in Gobbo</span></a></div></div>
  <div id="content-container">
    <div id="content"><section id="gobbo-node-7c1a4b38-d9e9-4744-8a88-bc4ec808ea31"><h2><span class="numbering">1</span><span>Introduction</span></h2></section><p><span>In this introduction I briefly go over what Gobbo is and how to contribute as a beta tester.</span></p><p><a class="cross-reference" href="#gobbo-node-sec:getting-started"><span>Section </span>2</a><span> gets you started. </span><a class="cross-reference" href="#gobbo-node-sec:writing"><span>Section </span>3</a><span> teaches you step by step how to use the available features to write a document. If you want to see a larger, real world example immediately, take a look at the Gobbo code for this very page in </span><a class="cross-reference" href="#gobbo-node-this-page-in-gobbo"><span>Appendix </span>A</a><span>.</span></p><p><span>Goal of Gobbo project is to .</span></p><p><span>First phase of beta is to test the syntax and core functionality. Do this by using an existing tool (the tool I wrote to write this very document). In the next phase focus on the other major aspect of Gobbo: being able to extend tools or create your own tools.</span></p><p><span>This document tells you how to get started. If you want to immediately jump to a non-trivial example, I included the Gobbo code of this page in . If you follow the document you will see a buildup of exampels.</span></p><p><span>What I would like from you is to actually use the provided tool to write something. If you have no inspiration, you could try to port one of your existing works to Gobbo. While writing your document in Gobbo, please take notes (here I want a note) of what you struggle with, what is intuitive/not intuitive, what you wish you could do, what you tried to do, failed, looked up. Generally anytthing potentially interesting that comes to mind.</span></p><p><span>What you could do is start a thread or text channel in the discord server to write your notes on the fly. That way I and the other beta participants can see and start dicussions.</span></p><p><span>Afterwards a reflection: what do you wish you could do, but couldn&#39;t or at least couldn&#39;t figure out how to do. At some point I&#39;d like to have a live conversation about your experience as well.</span></p><section id="gobbo-node-sec:getting-started"><h2><span class="numbering">2</span><span>Getting started</span></h2><p><span>Initial setup, then what you need to do every time you want to start writing. I assume you can use a terminal; if you can&#39;t, reach out to me for help.</span></p><section id="gobbo-node-9b81ac52-fb3b-4e66-96ee-7fe0ef094d67"><h3><span class="numbering">2.1</span><span>Initial setup</span></h3><p><span>You&#39;ll need </span><span>5</span><span> things:</span></p><table id="gobbo-node-list:requirements" class="list"><tbody><tr><td>1</td><td><p><span>A directory containing both the writing program and your document&#39;s project directory.</span></p></td></tr><tr><td>2</td><td><p><span>A text editor to actually write your document.</span></p></td></tr><tr><td>3</td><td><p><span>A runtime for the writing program.</span></p></td></tr><tr><td>4</td><td><p><span>A tool that watches your document&#39;s project directory for changes.</span></p></td></tr><tr><td>5</td><td><p><span>A tool that automatically refreshes the preview of your rendered document.</span></p></td></tr></tbody></table><section id="gobbo-node-section:directory"><h4><span class="numbering">2.1.1</span><span>Directory</span></h4><p><span>Github or zip in Discord server</span></p></section><section id="gobbo-node-683214c4-e4d2-4ff7-878d-2d8e2b77c74d"><h4><span class="numbering">2.1.2</span><span>Text editor</span></h4><p><span>You can use any editor you like, but you can find a </span><a class="link" href="https://marketplace.visualstudio.com/items?itemName=jeroenvanwijgerden.gobbo-lang"><span>Gobbo extension</span></a><span> for </span><a class="link" href="https://code.visualstudio.com/docs/setup/setup-overview"><span>VSCode</span></a><span>.</span></p><p><span>The extension is still quite limited. It colors escaped text, node and property delimiters (&#39;rainbow&#39; style), can collapse/fold nodes and auto-inserts closing delimeters for brackets and quotes.</span></p><p><span>One useful manouvre the extension enables is to select text, press </span><kbd class="key"><span>[</span></kbd><span> to wrap node delimeters around it, press </span><kbd class="key"><span>ðŸ œ</span></kbd><span> and write a node type. I do this e.g. to quickly turn </span><code class="inline"><span class="gobbo-lang-token-text">text</span></code><span> into </span><code class="inline"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">b</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">text</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></code><span>.</span></p><p><span>Eventually I want some powerful language support as shown </span><a class="link" href="https://calva.io/paredit/"><span>here</span></a><span>.</span></p><p><span>Important: Gobbo syntax is designed under the assumption that you use word wrap while editing. In VSCode the default key binding to toggle word wrap is </span><kbd class="key"><span>Alt</span></kbd><span> + </span><kbd class="key"><span>Z</span></kbd><span>. I&#39;m looking into having the extension enable word wrap for </span><span class="directory-inline"><span>.gobbo</span></span><span> files automatically.</span></p></section><section id="gobbo-node-f0886ee5-a908-4be1-9006-231c5d7076c4"><h4><span class="numbering">2.1.3</span><span>Runtime</span></h4><p><span>Deno, install </span><a class="link" href="https://deno.com/manual@v1.33.3/getting_started/installation"><span>here</span></a><span>.</span></p><p><span>Fetch the tool&#39;s dependencies. Go to the tool&#39;s directory and run</span></p><div class="terminal"><span class="preamble"><span class="user"><span class="name">user</span>@<span class="host">host</span></span>:<span class="directory">/gobbo-beta-tool/</span>$</span><span class="input"><span>deno cache deps.ts</span></span><div class="output"></div></div><p><span>You might already want to tinker with the tool&#39;s code. If so, for VSCode install the Deno extension. Don&#39;t forget to </span><kbd class="key"><span>Ctrl</span></kbd><span>/</span><kbd class="key"><span>Cmd</span></kbd><span> + </span><kbd class="key"><span>Shift</span></kbd><span> + </span><kbd class="key"><span>P</span></kbd><span> and look for </span><code class="inline"><span class="gobbo-lang-token-text">Deno: Initialize Workspace Configuration</span></code><span>.</span></p></section><section id="gobbo-node-66e647a7-0c22-4bb2-bcc2-6c3afeba5463"><h4><span class="numbering">2.1.4</span><span>Watcher</span></h4><p><a class="link" href="https://github.com/watchexec/watchexec"><span>Watchexec</span></a><span>. Probably easiest to install with a package manager.</span></p><p><span>Windows (using </span><a class="link" href="https://chocolatey.org/install"><span>Chocolatey</span></a><span>):</span></p><div class="terminal"><span class="preamble"><span class="user"><span class="name">user</span>@<span class="host">host</span></span>:<span class="directory">~</span>$</span><span class="input"><span>choco install watchexec</span></span><div class="output"></div></div><p><span>OSX (using </span><a class="link" href="https://brew.sh/"><span>Homebrew</span></a><span>):</span></p><div class="terminal"><span class="preamble"><span class="user"><span class="name">user</span>@<span class="host">host</span></span>:<span class="directory">~</span>$</span><span class="input"><span>brew install watchexec</span></span><div class="output"></div></div><p><a class="link" href="https://github.com/watchexec/watchexec/blob/main/doc/packages.md"><span>Linux</span></a></p></section><section id="gobbo-node-af6eb711-ea7a-41d5-90b8-86e18915f456"><h4><span class="numbering">2.1.5</span><span>Refresh tool</span></h4><p><span>Note: you can use a refresh tool of your own choosing by editing </span><span class="directory-inline"><span>deno.json</span></span><span>.</span></p><p><a class="link" href="https://browsersync.io/"><span>Browsersync</span></a><span>.</span></p><p><span>It requires Node. </span><a class="link" href="https://nodejs.org/en/download"><span>here</span></a><span>.</span></p><p><span>After installing Node (which should also install the </span><code class="inline"><span class="gobbo-lang-token-text">npm</span></code><span> command line tool), run</span></p><div class="terminal"><span class="preamble"><span class="user"><span class="name">user</span>@<span class="host">host</span></span>:<span class="directory">~</span>$</span><span class="input"><span>npm install -g browser-sync</span></span><div class="output"></div></div></section></section><section id="gobbo-node-c4454c2a-2400-4080-a69b-1f1c56ca3d74"><h3><span class="numbering">2.2</span><span>Starting to write</span></h3><p><span>Open the </span><span class="directory-inline"><span>doc</span></span><span> directory in a text editor and start editing </span><span class="directory-inline"><span>main.gobbo</span></span><span>.</span></p><p><span>In the tool&#39;s root directory (so not </span><span class="directory-inline"><span>doc</span></span><span>) run:</span></p><div class="terminal"><span class="preamble"><span class="user"><span class="name">user</span>@<span class="host">host</span></span>:<span class="directory">/gobbo-beta-tool/</span>$</span><span class="input"><span>deno task rebuild</span></span><div class="output"></div></div><p><span>This will watch </span><span class="directory-inline"><span>doc</span></span><span> for changes, and when any happen, recompiles your document and places it in the </span><span class="directory-inline"><span>dist</span></span><span> directory.</span></p><p><span>In a second terminal run:</span></p><div class="terminal"><span class="preamble"><span class="user"><span class="name">user</span>@<span class="host">host</span></span>:<span class="directory">/gobbo-beta-tool/</span>$</span><span class="input"><span>deno task preview</span></span><div class="output"></div></div><p><span>This serves </span><span class="directory-inline"><span>dist</span></span><span> over HTTP, opens </span><span class="directory-inline"><span>dist/index.html</span></span><span> in a browser and refreshes the page whenever </span><span class="directory-inline"><span>dist</span></span><span> changes.</span></p><p><span>Keep both terminals running while editing!</span></p><p><span>If you now edit and save </span><span class="directory-inline"><span>main.gobbo</span></span><span> you see the changes reflected in your browser.</span></p></section></section><section id="gobbo-node-sec:writing"><h2><span class="numbering">3</span><span>Writing</span></h2><section id="gobbo-node-a084257b-b193-448b-9af6-d9af64956560"><h3><span class="numbering">3.1</span><span>Concepts</span></h3><section id="gobbo-node-e2823308-74fa-48ea-b3e7-5964b366a037"><h4><span class="numbering">3.1.1</span><span>Text and paragraphs</span></h4><p><span>Initially your </span><span class="directory-inline"><span>main.gobbo</span></span><span> looks like this:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">Hello, world!</span></td></tr></tbody></table></div><p><span>Each line becomes a paragraph (later you&#39;ll learn there can be exceptions):</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">Hello, world!</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-text">Good-bye, world!</span></td></tr></tbody></table></div><p><b><span>Empty lines and indentation do not have any semantic meaning whatsoever.</span></b><span> This frees you to use them to format the document to your preference. The result below is equivalent to the result above:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">Hello, world!</span></td></tr><tr><td class="line-numbers">2</td><td class="code">&#10;</td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-text">Good-bye, world!</span></td></tr></tbody></table></div></section><section id="gobbo-node-b7ec531b-69ef-424b-8bae-65cc9db8b70c"><h4><span class="numbering">3.1.2</span><span>Nodes</span></h4><p><span>You write anything other than plain text as a </span><i><span>node</span></i><span>.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">This is </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">b</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">bold</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-text">.</span></td></tr></tbody></table></div><p><span>A node is always delimited by square brackets. Here </span><code class="inline"><span class="gobbo-lang-token-text">b</span></code><span> is is the name of the node&#39;s type. The other text inside the node is the node&#39;s </span><i><span>content</span></i><span>.</span></p><p><span>After the opening bracket and the node&#39;s type name you can put any amount of whitespace (spaces, tabs or newlines).</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">This is </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-space">   </span><span class="gobbo-lang-token-name-node-type">b</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -6ch; padding-left: 6ch;"><span class="gobbo-lang-token-space">      </span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div style="text-indent: -12ch; padding-left: 12ch;"><span class="gobbo-lang-token-space">            </span><span class="gobbo-lang-token-text">bold</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-text">.</span></div></td></tr></tbody></table></div><p><b><span>Whitespace at the end of a line has semantic meaning.</span></b></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">This is </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">b</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">bold   </span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-text">.</span></td></tr></tbody></table></div><p><span>is not the same.</span></p><p><span>However, </span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">This is </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">b</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">bold</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -6ch; padding-left: 6ch;"><span class="gobbo-lang-token-space">      </span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-text">.</span></div></td></tr></tbody></table></div><p><span>is the same. Select the text in the code block: the line ends where the text ends. The whitespace between the the text and the closing bracket now happens at the start of a line, which makes it indentation and is thus skipped.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">This is </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">b</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">bold   </span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -6ch; padding-left: 6ch;"><span class="gobbo-lang-token-space">      </span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-text">.</span></div></td></tr></tbody></table></div><p><span>If you select the text is the above code block you see that now there is whitespace on the line after the text, which causes it to become part of the text. The whitespace on the next line, before the closing bracket, is still considered indentation and skipped.</span></p></section><p><span>    </span></p><section id="gobbo-node-7b63d041-0d4e-4c2e-af0a-edbba89f2a02"><h4><span class="numbering">3.1.3</span><span>Text and paragraph nodes</span></h4><p><span>Actually, any plain text you write is shorthand for a text node. You could also write text nodes explictly. The following two examples are equivalent:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">foo</span></td></tr></tbody></table></div><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">foo</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>You can also write paragraph nodes explicitly. The following three examples are all equivalent:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">foo</span></td></tr></tbody></table></div><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">foo</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">paragraph</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">foo</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>You might want to have explicit paragraphs if you want a paragraph in content that doesn&#39;t have implicit paragraphs.</span></p><p><span>You might want explicit paragraph or text nodes in case you want to give them properties (see </span><a class="cross-reference" href="#gobbo-node-sec:properties"><span>section </span>3.1.6</a><span>).</span></p><p><span>Besides plain text being syntactic shorthand for text nodes, the syntax for explicit text also differs from the syntax for other nodes. </span><a class="cross-reference" href="#gobbo-node-sec:node-text"><span>Section </span>3.2.1</a><span> discusses this in more detail.</span></p><p><span>You don&#39;t always want a node (including a text node) to be part of a paragraph. For each node type it must be specified if nodes of that type belong in a paragraph or not. </span><code class="inline"><span class="gobbo-lang-token-text">text</span></code><span> and </span><b></b><span> nodes belong in a paragraph. A </span><code class="inline"><span class="gobbo-lang-token-text">section</span></code><span> node, for example, does not belong in a paragraph.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">Hello</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">b</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Bye</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>is equivalent to</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">paragraph</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Hello</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">paragraph</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">b</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Bye</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>The </span><code class="inline"><span class="gobbo-lang-token-text">text</span></code><span> and </span><code class="inline"><span class="gobbo-lang-token-text">b</span></code><span> nodes are placed in a paragraph, the </span><code class="inline"><span class="gobbo-lang-token-text">section</span></code><span> node is not. </span><code class="inline"><span class="gobbo-lang-token-text">paragraph</span></code><span> nodes themselves are also not placed in a paragraph.</span></p><p><span>If you place a node that doesn&#39;t belong in a paragraph on the same line as nodes that do, then the node that doesn&#39;t belong in a paragraph still not placed in a paragraph:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">Hello </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-text"> Bye</span></td></tr></tbody></table></div><p><span>is equivalent to</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">paragraph</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Hello </span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">paragraph</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text-escaped">` Bye`</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>The nodes that appear top-level (not nested within other nodes) are implicitly placed into paragraphs. For nodes nested within other nodes, it depends. For each node type it is specified whether or the content for nodes of the type is placed into paragraphs. E.g. for type </span><code class="inline"><span class="gobbo-lang-token-text">section</span></code><span> content is placed into paragraphs, for </span><code class="inline"><span class="gobbo-lang-token-text">code-block</span></code><span> it&#39;s not:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">foo</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">bar</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>is equivalent to</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">paragraph</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">foo</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">bar</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>As a document writer you probably don&#39;t have to worry about the &#39;in paragraph&#39; and &#39;contains paragraphs&#39; settings of node types. It&#39;s more a convenience for for node type creators.</span></p></section><section id="gobbo-node-5d4b8db1-293e-41cf-95fb-1b17b0c989b6"><h4><span class="numbering">3.1.4</span><span>Escaping</span></h4><p><span>Because of the existance of nodes, you can&#39;t use the characters </span><span>[</span><span> and </span><span>]</span><span> in your plain text. If you want these characters in your document&#39;s text, you have to write them as </span><i><span>escaped text</span></i><span>. Escaped text is delimited by the </span><span>`</span><span> character.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">You can&#39;t use the characters </span><span class="gobbo-lang-token-text-escaped">`[`</span><span class="gobbo-lang-token-text"> and </span><span class="gobbo-lang-token-text-escaped">`]`</span><span class="gobbo-lang-token-text"> in your plain text.</span></td></tr></tbody></table></div><p><span>Because of the existance of escaped text, you can&#39;t use the </span><span>`</span><span> character in your plain text. If you want this character in your document&#39;s text, you have to write it as escaped text and escape it within the escaped text by prepending a \:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">You can&#39;t use the </span><span class="gobbo-lang-token-text-escaped">`\``</span><span class="gobbo-lang-token-text"> character in your plain text.</span></td></tr></tbody></table></div><p><span>You can write a \ character in plain text, but if you want a \ in escaped text you&#39;ll have to escape it by prepending it by another \:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text-escaped">`You can&#39;t use the \`\\\`\` character in your plain text.`</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>To write the above example I had to escape the escaped text that escapes escaped text. Look at the code for the previous example in </span><a class="cross-reference" href="#gobbo-node-this-page-in-gobbo"><span>Appendix </span>A</a><span> and sympathize with me.</span></p><p><b><span>If you want to escape text, write escaped text: text delimited by </span><span>`</span><span>.</span></b><span> </span><b><span>In escaped text you can use the \ character to escape exactly two characters: \ and </span><span>`</span><span>.</span></b><span> Traditionally you would also escape things like newline characters and tabs. In Gobbo you just actually write the character (e.g. by creating a new line or insterting a tab).</span></p><p><span>Like regular text, escaped text is also an implicit text node.</span></p></section><section id="gobbo-node-d32f85fc-227c-4b8a-ad1d-5306bc3e65a9"><h4><span class="numbering">3.1.5</span><span>Comments</span></h4><p><span>You can start a comment at any place where skippable whitespace is expected.</span></p><p><span>A line comment starts with </span><code class="inline"><span class="gobbo-lang-token-comment">;</span></code><span>.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">Here ; is part of the text: it&#39;s not placed at a place where skippable whitespace is expected.</span></td></tr></tbody></table></div><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-comment">; Here it&#39;s not part of the text but indeed a comment: it&#39;s placed where skippable whitespace is expected.</span></td></tr></tbody></table></div><p><span>You can also place a comment in an arbitrary range of your document (as opposed to only the remainder of a line) by placing it between a pair of </span><code class="inline"><span class="gobbo-lang-token-comment">/*</span></code><span> and </span><code class="inline"><span class="gobbo-lang-token-text">*/</span></code><span>.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-comment">/* multi</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -6ch; padding-left: 6ch;"><span class="gobbo-lang-token-comment">      line</span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div style="text-indent: -10ch; padding-left: 10ch;"><span class="gobbo-lang-token-comment">          comment */</span></div></td></tr></tbody></table></div><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">link</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-comment">/* comment */</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">company.com</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">ClIcK Me!</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>Arbitrary range comments </span><code class="inline"><span class="gobbo-lang-token-comment">/* can /* be */ nested */</span></code><span>.</span></p><p><span>A common use of comments it not to actually provide a comment but to temporarily ignore part of your source. As a convenience, you can ignore an entire node by prefixing a </span><code class="inline"><span class="gobbo-lang-token-text">_</span></code><span>. Important: the ignored node should still be syntactically correct!</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 2ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-space"> </span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-text">Foo</span></div></td></tr><tr><td class="line-numbers">4</td><td class="code">&#10;</td></tr><tr><td class="line-numbers">5</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-ignore">_[section</span></div></td></tr><tr><td class="line-numbers">6</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-ignore">    </span></div></td></tr><tr><td class="line-numbers">7</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-ignore">    Bar</span></div></td></tr><tr><td class="line-numbers">8</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-ignore">    </span></div></td></tr><tr><td class="line-numbers">9</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-ignore">    [section</span></div></td></tr><tr><td class="line-numbers">10</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-ignore">    </span></div></td></tr><tr><td class="line-numbers">11</td><td class="code"><div style="text-indent: -6ch; padding-left: 6ch;"><span class="gobbo-lang-token-ignore">      Baz]]</span></div></td></tr><tr><td class="line-numbers">12</td><td class="code"><div style="text-indent: -6ch; padding-left: 6ch;"><span class="gobbo-lang-token-space">      </span></div></td></tr><tr><td class="line-numbers">13</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">section</span></div></td></tr><tr><td class="line-numbers">14</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span></div></td></tr><tr><td class="line-numbers">15</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-space">    </span><span class="gobbo-lang-token-text">Qux</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr></tbody></table></div><p><span>I plan on letting </span><code class="inline"><span class="gobbo-lang-token-text">_</span></code><span> ignore more things than just nodes but haven&#39;t gotten around to it yet.</span></p><p><span>If you don&#39;t use _ to ignore a node you don&#39;t have to escape it:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">If you don&#39;t use </span><span class="gobbo-lang-token-text">_ to ignore a node you don&#39;t have to escape it:</span></td></tr></tbody></table></div></section><section id="gobbo-node-sec:properties"><h4><span class="numbering">3.1.6</span><span>Properties</span></h4><p><span>Many node types allow you to specify properties. Some node types such as </span><code class="inline"><span class="gobbo-lang-token-text">link</span></code><span> require a property to be specified to even be of any use.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">link</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">url</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">en.wikipedia.org</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Wikipedia</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>To know the available properties and accepted values for a node type you&#39;ll have to read the type&#39;s documentation.</span></p><p><span>Syntactically a property value is text not containing any whitespace or any of these characters: </span><code class="inline">` { } [ ] &lt; &gt;</code><span>. If you want a property value to contain any of these characters (including whitespace), you can also provide escaped text:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">link</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">url</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">`\` { } [ ] &lt; &gt;`</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>In </span><a class="cross-reference" href="#gobbo-node-sec:preamble-val"><span>section </span>3.1.9.1</a><span> you&#39;ll learn how to bind property values to a name. You can then use this binding as a property value.</span></p><p><span>Below I bind the property value </span><code class="inline"><span class="gobbo-lang-token-text">gobbo</span></code><span> to the name </span><code class="inline"><span class="gobbo-lang-token-text">lang</span></code><span> and then use it to specify the </span><code class="inline"><span class="gobbo-lang-token-text">language</span></code><span> property of two nodes.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">val</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">lang</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">language</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">val</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">lang</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">language</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">val</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">lang</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>Multiple property settings are separated by whitespace:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">language</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">line-numbers</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">true</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-no-parse"></span></td></tr></tbody></table></div><p><span>There can be whitespace between a name and a value:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-space">   </span><span class="gobbo-lang-token-name-property">language</span><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-space">    </span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-name-property">line-numbers</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-space"> </span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div style="text-indent: -6ch; padding-left: 6ch;"><span class="gobbo-lang-token-space">      </span><span class="gobbo-lang-token-text-escaped">true</span></div></td></tr><tr><td class="line-numbers">4</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-no-parse"></span></div></td></tr></tbody></table></div><p><span>As a convenience, each node type can have exactly one </span><i><span>main property</span></i><span>. This allows you to specify a value without having to mention the property&#39;s name. For type </span><code class="inline"><span class="gobbo-lang-token-text">link</span></code><span> the main property is </span><code class="inline"><span class="gobbo-lang-token-text">url</span></code><span>, so these two lines are equivalent:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">link</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">url</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">en.wikipedia.org</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Wikipedia</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">link</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">en.wikipedia.org</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Wikipedia</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>To avoid confusion, if you use both the shorthand and set the main property explicitly, you&#39;ll get an informative error when building your document.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">link</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">url</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">bar</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-comment">/* error: &quot;main property &#39;url&#39; already set&quot; */</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>The shorthand to set the main property must be the first setting. Placing the shorthand non-first is syntactically erroneous:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">line-numbers</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">true</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-no-parse">=gobbo}]</span></td></tr></tbody></table></div><p><span>As a convenience, there is a shorthand to set properties to </span><code class="inline"><span class="gobbo-lang-token-text">true</span></code><span> or </span><code class="inline"><span class="gobbo-lang-token-text">false</span></code><span>. These two lines are equivalent:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">line-numbers</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">true</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">wrap</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">false</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">line-numbers</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-operator">!</span><span class="gobbo-lang-token-name-property">wrap</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>In sections </span><a class="cross-reference" href="#gobbo-node-sec:preamble-cla">3.1.9.3</a><span> and </span><a class="cross-reference" href="#gobbo-node-sec:preamble-def">3.1.9.4</a><span> you&#39;ll learn more utilities for setting properties.</span></p></section><section id="gobbo-node-c65fdc3d-7b87-46d3-acc2-b5406f46f141"><h4><span class="numbering">3.1.7</span><span>Global and child types</span></h4><p><span>You&#39;ve seen </span><code class="inline"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">b</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">bold</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></code><span>, where </span><code class="inline"><span class="gobbo-lang-token-text">b</span></code><span> is the node&#39;s type. </span><code class="inline"><span class="gobbo-lang-token-text">b</span></code><span> is a </span><i><span>global</span></i><span> node type, meaning it can be used anywhere: top-level and inside any arbitrary deeply nested node.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">Some top-level </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">b</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">bold</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-text"> text.</span></td></tr><tr><td class="line-numbers">2</td><td class="code">&#10;</td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span></td></tr><tr><td class="line-numbers">4</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">section</span></div></td></tr><tr><td class="line-numbers">5</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-space">    </span><span class="gobbo-lang-token-text">Some nested </span><span class="gobbo-lang-token-delimeter-node depth-3">[</span><span class="gobbo-lang-token-name-node-type">b</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">bold</span><span class="gobbo-lang-token-delimeter-node depth-3">]</span><span class="gobbo-lang-token-text"> text</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr></tbody></table></div><p><span>Indeed, </span><code class="inline"><span class="gobbo-lang-token-text">section</span></code><span> is also a global node type.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">title</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Foo</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-3">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">title</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Bar</span><span class="gobbo-lang-token-delimeter-node depth-3">]</span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-space">    </span><span class="gobbo-lang-token-text-escaped">`some code`</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr></tbody></table></div><p><span>Both </span><code class="inline"><span class="gobbo-lang-token-text">section</span></code><span> and </span><code class="inline"><span class="gobbo-lang-token-text">code-block</span></code><span> have a child type </span><code class="inline"><span class="gobbo-lang-token-text">title</span></code><span>. These types are distinct. In any error messaging they would be referred to as </span><code class="inline"><span class="gobbo-lang-token-text">section\title</span></code><span> and </span><code class="inline"><span class="gobbo-lang-token-text">code-block\title</span></code><span>. In fact, the above example is a shorthand. Equivalent would be:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">title</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Foo</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-3">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">title</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Bar</span><span class="gobbo-lang-token-delimeter-node depth-3">]</span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-space">    </span><span class="gobbo-lang-token-text-escaped">`some code`</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr></tbody></table></div><p><span>The main reason I introduced the notion of child types was to introduce a semblence of namespaces. As you&#39;ll learn during phase 2 of the beta, node type authors now only have to worry about name clashing within their own node type. Tool authors only have to worry about name clashes in the global namespace.</span></p><p><span>Although child types have a namespace effect, you shouldn&#39;t assume you can just place child-typed nodes anywhere.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">Can I have a top-level </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">title</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Section Title</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-text">?</span></td></tr></tbody></table></div><p><span>In this specific case, no you cannot! You should assume child types can only be used under specific circumstances. You&#39;ll read more about the peculiarities of child-typed nodes in </span><a class="cross-reference" href="#gobbo-node-sec:list-vs-map"><span>section </span>3.1.8</a><span>.</span></p></section><section id="gobbo-node-sec:list-vs-map"><h4><span class="numbering">3.1.8</span><span>Lists and maps</span></h4><p><span>The content of nodes of certain types such as </span><code class="inline"><span class="gobbo-lang-token-text">b</span></code><span> or </span><code class="inline"><span class="gobbo-lang-token-text">link</span></code><span> is, straightforwardly, a list of other nodes. Remember that text and escaped text are implicit text nodes. The content of a text node is always a single piece of plain text.</span></p><p><span>However, when child-typed nodes are involved chances are that the parent node&#39;s content is not a list but a &#39;map&#39;. A node&#39;s content being a list or a map depends on the type of the node&#39;s type. To save ourselves a headache: the type of a type is also called a </span><i><span>kind</span></i><span>. We can thus speak of </span><i><span>list-kinded</span></i><span> and </span><i><span>map-kinded</span></i><span> types/nodes.</span></p><p><span>When a node has distincts parts to it, it is probably map-kinded. Take a section, for example. </span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">title</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Foo</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-text">Bar</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr></tbody></table></div><p><span>A section has two distinct parts: a title and a body. These distinct parts are specified as child-typed nodes. But hold on: there&#39;s a </span><code class="inline"><span class="gobbo-lang-token-text">\title</span></code><span> node, but where&#39;s the </span><code class="inline"><span class="gobbo-lang-token-text">\body</span></code><span> node?</span></p><p><span>Actually,</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">title</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Foo</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-text">Bar</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr></tbody></table></div><p><span>is shorthand for</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">title</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Foo</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">body</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Bar</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>We&#39;ll come back to this shorthand soon.</span></p><p><span>Whereas in a list-kinded node the order of the content in the source directly describes the order of the content in the rendered document, for map-kinded nodes this need not be the case. For example, this would render a document identical to the document rendered by the previous example:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">body</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Bar</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">title</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Foo</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>For map-kinded nodes, the order of the content is decided by the creator of the node type, not by the author of the document (the one using the node type). A section&#39;s title just always comes before its body, sorry not sorry!</span></p><p><span>Back to the shorthand. Like with properties, as a convenience, map-kinded types can have a single </span><i><span>main mapped child type</span></i><span>. The content of a map-kinded node with a main mapped child type will implicitly become the content of a single node of that main type.</span></p><p><span>For example, the main mapped child type of the </span><code class="inline"><span class="gobbo-lang-token-text">section</span></code><span> type is the </span><code class="inline"><span class="gobbo-lang-token-text">\body</span></code><span> type. As such in</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Foo </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">b</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Bar</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>An implicit </span><code class="inline"><span class="gobbo-lang-token-text">\body</span></code><span> node is made with as content the two nodes </span><code class="inline"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text-escaped">`Foo `</span><span class="gobbo-lang-token-no-parse"></span></code><span> and </span><code class="inline"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">b</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Bar</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></code><span>. The previous example is equivalent to</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">body</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Foo </span><span class="gobbo-lang-token-delimeter-node depth-3">[</span><span class="gobbo-lang-token-name-node-type">b</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Bar</span><span class="gobbo-lang-token-delimeter-node depth-3">]</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>An exception to this convenience is that nodes that themselves should be mapped (because the parent&#39;s type specified their types as &#39;should be mapped&#39;) become mapped to the parent node, having priority over becoming part of the content of the implicit mapped node.</span></p><p><span>Let&#39;s take another look at</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">title</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Foo</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-text">Bar</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr></tbody></table></div><p><span>When the content of the </span><code class="inline"><span class="gobbo-lang-token-text">section</span></code><span> node is processed, first a </span><code class="inline"><span class="gobbo-lang-token-text">\title</span></code><span> node is encountered. According to the </span><code class="inline"><span class="gobbo-lang-token-text">section</span></code><span> type, </span><code class="inline"><span class="gobbo-lang-token-text">\title</span></code><span> nodes should be mapped! So it is taken out and placed in the </span><code class="inline"><span class="gobbo-lang-token-text">\title</span></code><span> bin. Next up is the </span><code class="inline"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text-escaped">` Bar`</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></code><span> node. Its type, </span><code class="inline"><span class="gobbo-lang-token-text">text</span></code><span>, is not specified as being mapped, so it becomes part of the implicit </span><code class="inline"><span class="gobbo-lang-token-text">\body</span></code><span> node. All content is now processed: an implicit </span><code class="inline"><span class="gobbo-lang-token-text">\body</span></code><span> node is made with as content a list of the non-mapped nodes of the </span><code class="inline"><span class="gobbo-lang-token-text">section</span></code><span> parent node, which happens to be that single </span><code class="inline"><span class="gobbo-lang-token-text">text</span></code><span> node. This implicit </span><code class="inline"><span class="gobbo-lang-token-text">\body</span></code><span> node is placed in the </span><code class="inline"><span class="gobbo-lang-token-text">\body</span></code><span> bin, and the mapping is done.</span></p><p><span>You could even place mapped nodes after the implicit node&#39;s content and get the same result:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-text">Bar</span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">title</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Foo</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr></tbody></table></div><p><span>You could even have mapped nodes anywhere in between the non-mapped nodes:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-text">Foo</span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">title</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Bar</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span></div></td></tr><tr><td class="line-numbers">4</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-text">Baz</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr></tbody></table></div><p><span>is equivalent to</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">title</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Bar</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">body</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Foo</span></div></td></tr><tr><td class="line-numbers">4</td><td class="code"><div style="text-indent: -9ch; padding-left: 9ch;"><span class="gobbo-lang-token-space">         </span><span class="gobbo-lang-token-text">Baz</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr></tbody></table></div><p><span>A restriction for this convenience is that the main mapped child type </span><i><span>must</span></i><span> be list-kinded. Indeed, </span><code class="inline"><span class="gobbo-lang-token-text">section\body</span></code><span> is list-kinded; as it happens, so is </span><code class="inline"><span class="gobbo-lang-token-text">list\title</span></code><span>. But this restriction is only important when creating your own node types (be patient for phase 2!).</span></p><p><span>Another map-kinded type is </span><code class="inline"><span class="gobbo-lang-token-text">list</span></code><span>. The type </span><code class="inline"><span class="gobbo-lang-token-text">list</span></code><span> has a single child type, </span><code class="inline"><span class="gobbo-lang-token-text">\item</span></code><span>, which is mapped and also specified as the main mapped child type.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">list</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">item</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Foo</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -6ch; padding-left: 6ch;"><span class="gobbo-lang-token-space">      </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">item</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Bar</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div style="text-indent: -6ch; padding-left: 6ch;"><span class="gobbo-lang-token-space">      </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">item</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Baz</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr></tbody></table></div><p><span>In the above example all nodes in the </span><code class="inline"><span class="gobbo-lang-token-text">list</span></code><span> node&#39;s content are of a mapped type: they are all placed in the </span><code class="inline"><span class="gobbo-lang-token-text">\list</span></code><span> bin. Earlier I wrote that for map-kinded nodes, the order of the content is decided by the creator of the type, not the author of the document. Time for some nuance. The creator of the type only decides the order of the mapped child types: first come all the titles, then come all the bodies. The author of the document still decides the order of the content within a mapped type. The a mapped child type&#39;s &#39;bin&#39; in which nodes may or may not be placed is, itself, a list. The mapped nodes are placed in this list in the same order as they are written in the document.</span></p><p><span>However, they way non-mapped content in a </span><code class="inline"><span class="gobbo-lang-token-text">list</span></code><span> node is used to create implicit nodes is different from the way non-mapped content is used to create an implicit node as we&#39;ve seen for the </span><code class="inline"><span class="gobbo-lang-token-text">section</span></code><span> type.</span></p><p><span>Whereas</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Foo</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -9ch; padding-left: 9ch;"><span class="gobbo-lang-token-space">         </span><span class="gobbo-lang-token-text">Bar</span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div style="text-indent: -9ch; padding-left: 9ch;"><span class="gobbo-lang-token-space">         </span><span class="gobbo-lang-token-text">Baz</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr></tbody></table></div><p><span>is equivalent to</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">body</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Foo</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -16ch; padding-left: 16ch;"><span class="gobbo-lang-token-space">                </span><span class="gobbo-lang-token-text">Bar</span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div style="text-indent: -16ch; padding-left: 16ch;"><span class="gobbo-lang-token-space">                </span><span class="gobbo-lang-token-text">Baz</span><span class="gobbo-lang-token-no-parse"></span></div></td></tr></tbody></table></div><p><span>an equivalent of</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">list</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Foo</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -6ch; padding-left: 6ch;"><span class="gobbo-lang-token-space">      </span><span class="gobbo-lang-token-text">Bar</span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div style="text-indent: -6ch; padding-left: 6ch;"><span class="gobbo-lang-token-space">      </span><span class="gobbo-lang-token-text">Baz</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr></tbody></table></div><p><span>would be</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">list</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">item</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Foo</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -6ch; padding-left: 6ch;"><span class="gobbo-lang-token-space">      </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">item</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Bar</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div style="text-indent: -6ch; padding-left: 6ch;"><span class="gobbo-lang-token-space">      </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">item</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Baz</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr></tbody></table></div><p><span>When a map-kinded type specifies a main mapped child type, it must specify whether </span><i><span>all</span></i><span> non-mapped content is used to create </span><i><span>a single implicit node</span></i><span>, or whether </span><i><span>each line</span></i><span> of the non-mapped content is used to create an implicit node, resulting in </span><i><span>an implicit node per line</span></i><span>.</span></p><p><span>To know if a node type is list-kinded or map-kinded, and in case of map-kinded, if it uses all content or a line to create an implicit node, you&#39;ll have to familiarize yourself with the node type.</span></p><p><span>Like with explicit paragraph and text nodes, you might want to have explicit main mapped child type nodes to give them properties. For example, with list items you might want to do something like this:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">list</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">item</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">id</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">step:eat</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Eat</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -6ch; padding-left: 6ch;"><span class="gobbo-lang-token-space">      </span><span class="gobbo-lang-token-text">Sleep</span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div style="text-indent: -6ch; padding-left: 6ch;"><span class="gobbo-lang-token-space">      </span><span class="gobbo-lang-token-text">Code</span></div></td></tr><tr><td class="line-numbers">4</td><td class="code"><div style="text-indent: -6ch; padding-left: 6ch;"><span class="gobbo-lang-token-space">      </span><span class="gobbo-lang-token-text">Go back to </span><span class="gobbo-lang-token-delimeter-node depth-3">[</span><span class="gobbo-lang-token-name-node-type">ref</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">step:eat</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">step </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">number</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-delimeter-node depth-3">]</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr></tbody></table></div><table class="list"><tbody><tr id="gobbo-node-step:eat"><td>1</td><td><p><span>Eat</span></p></td></tr><tr><td>2</td><td><p><span>Sleep</span></p></td></tr><tr><td>3</td><td><p><span>Code</span></p></td></tr><tr><td>4</td><td><p><span>Go back to </span><a class="cross-reference" href="#gobbo-node-step:eat"><span>step </span>1</a></p></td></tr></tbody></table><p><span>The above exampe contains a case where a child type is not mapped. It&#39;s not even the child of a map-kinded type. The type </span><code class="inline"><span class="gobbo-lang-token-text">\number</span></code><span> is a child of </span><code class="inline"><span class="gobbo-lang-token-text">ref</span></code><span>, which is list-kinded. Here of the </span><code class="inline"><span class="gobbo-lang-token-text">\number</span></code><span> does absolutely matter relative to the other nodes and should be decided by the author of the document!</span></p><p><span>Although this section is dense, the intuition should be simple. There are child types which you should use carefully. Sometimes you can place them anywhere you want (or at all), sometimes not. Sometimes a node&#39;s content becomes an implicit node. Sometimes each line becomes an implicit node. It all depends on the node type you&#39;re working with, so familiarize yourself!</span></p><p><span>Some closing remarks. It is called &#39;</span><i><span>mapped</span></i><span> child types&#39;, because not all child types need necessarily be mapped. It is called a &#39;mapped </span><i><span>child</span></i><span> type&#39;, because currently I decided it should only be possible to map child types, not any type.</span></p></section><section id="gobbo-node-7b2caaf2-3b90-4bb2-bd99-3a7cbac961a5"><h4><span class="numbering">3.1.9</span><span>Preamble</span></h4><p><span>Your document&#39;s actual content is provided by nodes and their properties. However, while writing you can make use of some conveniences - mostly to greatly reduce repetitive labor - to specify these nodes and their properties. You do this with preamble.</span></p><p><span>As a general rule, you put preamble </span><i><span>before</span></i><span> any content: the preamble will then be applied to that content. In </span><a class="cross-reference" href="#gobbo-node-sec:macro-preamble"><span>section </span>3.1.10.3</a><span> you&#39;ll learn how to put preamble in the middle of content as well (not really, but intuitively).</span></p><p><span>The following subsections show all four types of preamble and provide more detail on how preamble works.</span></p><section id="gobbo-node-sec:preamble-val"><h5><span class="numbering">3.1.9.1</span><span>Value</span></h5><p><span>With </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">val</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">name</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text-escaped">value</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span> you can bind a property value to a name. You can then place </span><code class="inline">&lt;val name&gt;</code><span> anywhere a property value is expected. Lines 2 and 3 are equivalent:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">val</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">wikipedia</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text-escaped">https://en.wikipedia.org</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">link</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">val</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">wikipedia</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Wikipedia</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">link</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">https://en.wikipedia.org</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Wikipedia</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>You can use this like a variable in programming, to have ensure multiple nodes have the same property value; if you want to change the property value, you only have to change it in one place.</span></p><p><span>Important: all preamble must come before all content! The example below would give an error.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">Hello, world!</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-text">&lt;val wikipedia https://en.wikipedia.org&gt;</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">link</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">val</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">wikipedia</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Wikipedia</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>As you can tell from the syntax coloring, the &#39;preamble&#39; is actually parsed as plain text. So </span><code class="inline">&lt;val wikipedia&gt;</code><span> tries to use the property value bound to the name </span><code class="inline"><span class="gobbo-lang-token-text">wikipedia</span></code><span>, but there is no property value bound to the name </span><code class="inline"><span class="gobbo-lang-token-text">wikipedia</span></code><span>.</span></p><p><span>You can also place a bound property value as a text node in your content: see </span><a class="cross-reference" href="#gobbo-node-sec:macro-val"><span>section </span>3.1.10.1</a><span>.</span></p></section><section id="gobbo-node-006dbb42-24f4-4cfb-a8df-2a1d69d50d50"><h5><span class="numbering">3.1.9.2</span><span>Content</span></h5><p><span>With </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">name</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-text">content</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span> you can bind content to a name, to later place that bound content somewhere by using a special node: see </span><a class="cross-reference" href="#gobbo-node-sec:macro-con"><span>section </span>3.1.10.2</a><span>. To give you some idea already, lines 2 and 3 are equivalent:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-text">bar</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-text">bar</span></td></tr></tbody></table></div><p><span>You place the bound content between node delimeters, but this is the single exceptional case where node delimeters don&#39;t actually specify a node. In the above example, </span><code class="inline"><span class="gobbo-lang-token-text">bar</span></code><span> is not a node type, but just a plaim text.</span></p><p><span>You place </span><i><span>content</span></i><span> between the node delimeters: this means you can also put preamble there! Below is a nonsensical example just to show it&#39;s possible. After you&#39;ve seen the other types of preamble you&#39;ll see some sensical examples. Lines 2 and 3 are equivalent:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">val</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">bar</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text-escaped">baz</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">code</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">val</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">bar</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">baz</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>The namespaces for </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">val</span><span class="gobbo-lang-token-name-binding">&gt;</span><span class="gobbo-lang-token-no-parse"></span></code><span> and </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-name-binding">&gt;</span><span class="gobbo-lang-token-no-parse"></span></code><span> are separated: you can bind a property value and content to the same name without issue.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">val</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text-escaped">bar</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-text">baz</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code</span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">val</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div></section><section id="gobbo-node-sec:preamble-cla"><h5><span class="numbering">3.1.9.3</span><span>Class</span></h5><p><span>With </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span> preamble you can make a &#39;preset package&#39; of properties that you can then apply to a node multiple times.</span></p><p><span>Let&#39;s say you&#39;re writing a document discussing both Gobbo code and Clojure code. For Gobbo code blocks you want Gobbo syntax highlighting and wrapping; for Clojure code blocks you want Clojure syntax highlighting and no wrapping. You can do something like this:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">gob</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">wrap</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">clj</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">clojure</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-operator">!</span><span class="gobbo-lang-token-name-property">wrap</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">3</td><td class="code">&#10;</td></tr><tr><td class="line-numbers">4</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">gob</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">some code...</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">5</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">clj</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">some code...</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">6</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">gob</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">some code...</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">7</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">clj</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">some code...</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>Without the </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span> preamble, you&#39;d have to do something like:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">wrap</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">some code...</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">clojure</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-operator">!</span><span class="gobbo-lang-token-name-property">wrap</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">some code...</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">wrap</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">some code...</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">4</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">clojure</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-operator">!</span><span class="gobbo-lang-token-name-property">wrap</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">some code...</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>If you try to apply a class to a node but there is no such class for the node&#39;s type, you get an error:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">gob</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">wrap</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">gob</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-text"> ; error</span></td></tr></tbody></table></div><p><span>The </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span> preamble can give errors itself. Properties specified in the </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span> have to be valid for the provided type. Currently the only two ways for properties to be invalid is if you use the main property shorthand for a type that doesn&#39;t have a main property, or if you use the main property shorthand and later set the main property explicitly as well.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">paragraph</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">flag</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-comment">; this is fine</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">paragraph</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">bar</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-comment">; error: &quot;node type &#39;paragraph&#39; does not have a main property&quot;</span></td></tr></tbody></table></div><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">gob</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">code</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">language</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-comment">; error: &quot;main property &#39;language&#39; of type &#39;code&#39; already set&quot;</span></td></tr></tbody></table></div><p><span>You can even specify multiple types to create the class for:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">gob</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">code</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">wrap</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr></tbody></table></div><p><span>This is fine: both types </span><code class="inline"><span class="gobbo-lang-token-text">code</span></code><span> and </span><code class="inline"><span class="gobbo-lang-token-text">code-block</span></code><span> have a main property (both being </span><code class="inline"><span class="gobbo-lang-token-text">language</span></code><span>); </span><code class="inline"><span class="gobbo-lang-token-text">wrap</span></code><span> is only truly relevant for </span><code class="inline"><span class="gobbo-lang-token-text">code-block</span></code><span>, but </span><code class="inline"><span class="gobbo-lang-token-text">code</span></code><span> having the property </span><code class="inline"><span class="gobbo-lang-token-text">wrap</span></code><span> set doesn&#39;t cause an error.</span></p><p><span>However, the properties must be applicable to all provided types:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">gob</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">code</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">paragraph</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">wrap</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-comment">; error: &quot;node type &#39;paragraph&#39; does not have a main property&quot;</span></td></tr></tbody></table></div><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">code</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">link</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">bar</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">url</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">baz</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-comment">; error: &quot;main property &#39;url&#39; of type &#39;link&#39; already set&quot;</span></td></tr></tbody></table></div><p><span>You can apply any amount of classes to a node (given that the classes exist for the node&#39;s type). The classes are applied left-to-right. Lines 3 and 4 are equivalent:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">1</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">a</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">1</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">b</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">2</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">2</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-space">    </span><span class="gobbo-lang-token-name-property">b</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">3</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">c</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">4</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">1</span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">2</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">4</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">a</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">1</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">b</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">3</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">c</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">4</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>You can provide both classes and properties to a node. First the classes are applied left-to-right, then the properties. Lines 3 and 4 are equivalent:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">1</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">a</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">1</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">b</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">2</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">2</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-space">    </span><span class="gobbo-lang-token-name-property">b</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">3</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">c</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">4</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">1</span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">2</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">c</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">5</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">d</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">6</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">4</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">a</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">1</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">b</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">3</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">c</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">5</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">d</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">6</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>You can apply classes wherever you would supply properties. This includes in </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span> preamble itself! As with a node, the classes should exist for the provided types, the classes are applied left-to-right, then the properties are applied. Lines 3 and 4 are equivalent:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">a</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">1</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">b</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">2</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">bar</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">b</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">3</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">c</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">4</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">bar</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">4</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">a</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">1</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">b</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">3</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">c</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">4</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>You can omit any node types. This is a wild card, creating the class for all node types for which the class would be valid (not cause an error). Because of the lack of error messaging upon creation of the class, you might be confused as to why a class wasn&#39;t created for a node type. So omit node types  at your own risk (you lazy demon).</span></p><p><span>In the example below, the class </span><code class="inline"><span class="gobbo-lang-token-text">.foo</span></code><span> is created for type </span><code class="inline"><span class="gobbo-lang-token-text">code</span></code><span> but not for type </span><code class="inline"><span class="gobbo-lang-token-text">text</span></code><span> because </span><code class="inline"><span class="gobbo-lang-token-text">text</span></code><span> doesn&#39;t have a main property.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">bar</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code</span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-comment">; all good</span></td></tr><tr><td class="line-numbers">4</td><td class="code">&#10;</td></tr><tr><td class="line-numbers">5</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">6</td><td class="code"><span class="gobbo-lang-token-comment">; error: &quot;no class &#39;foo&#39; for type &#39;text&#39;&quot;</span></td></tr></tbody></table></div><p><span>Each node type has its own namespace for classes: you can give multiple types distinct classes with the same name. Lines 3 and 4 are equivalent:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">paragraph</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">bar</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">baz</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">paragraph</span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">4</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">paragraph</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">bar</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">baz</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>You could expand a class by simultaneously overriding it and using it, like below. Lines 3 and 4 are equivalent.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">bar</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">baz</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code</span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">4</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">bar</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">baz</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>Ever wanting to do this will make more sense after you&#39;ve read about </span><a class="cross-reference" href="#gobbo-node-sec:preamble-scope"><span>the scoping of preamble</span></a><span>.</span></p></section><section id="gobbo-node-sec:preamble-def"><h5><span class="numbering">3.1.9.4</span><span>Default</span></h5><p><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span> is similar to </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span>, but where a class lets you apply a bunch of properties to a node later, </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span> will cause a bunch of properties to be applied by default.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">code</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-text">An example of </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text-escaped">`&lt;def&gt;`</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-text">:</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text-escaped">`&lt;def code code-block {=gobbo}&gt;`</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>is equivalent to</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">An example of </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text-escaped">`&lt;def&gt;`</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-text">:</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text-escaped">`&lt;def code code-block {=gobbo}&gt;`</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>Syntactically the only difference between </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span> and </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span> is the keyword (</span><code class="inline"><span class="gobbo-lang-token-text">cla</span></code><span> or </span><code class="inline"><span class="gobbo-lang-token-text">def</span></code><span>) and for </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span> you provide a class name after the keyword.</span></p><p><span>Other than the differences mentioned in this section, all specifics of </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span> also hold for </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span>.</span></p><p><span>Note the difference in the below example. The semantics of line 1 are </span><i><span>create the &#39;foo&#39; class for all node types; applying the class will give a node these properties</span></i><span>. The semantics of line 2 are </span><i><span>by default, apply the &#39;foo&#39; class and these properties to all nodes for which it&#39;s possible to do so (in this case: which have a &#39;foo&#39; class)</span></i><span>.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">bar</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-class">.</span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">bar</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr></tbody></table></div></section><section id="gobbo-node-sec:preamble-scope"><h5><span class="numbering">3.1.9.5</span><span>Scope</span></h5><p><span>The portion of your document affected by preamble is limited: preamble has a scope. If you put it on top of a file (before any content, remember?) the preamble will be in effect for the entire file; if you put it inside a node, it will be in effect only within that node.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 2ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">wrap</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">3</td><td class="code">&#10;</td></tr><tr><td class="line-numbers">4</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span></td></tr><tr><td class="line-numbers">5</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">section</span></div></td></tr><tr><td class="line-numbers">6</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-space">    </span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">clojure</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-operator">!</span><span class="gobbo-lang-token-name-property">wrap</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></div></td></tr><tr><td class="line-numbers">7</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-space">    </span><span class="gobbo-lang-token-delimeter-node depth-3">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-node depth-3">]</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span></div></td></tr><tr><td class="line-numbers">8</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-space">    </span></div></td></tr><tr><td class="line-numbers">9</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr><tr><td class="line-numbers">10</td><td class="code">&#10;</td></tr><tr><td class="line-numbers">11</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>The example above is equivalent to</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">wrap</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">2</td><td class="code">&#10;</td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">section</span></td></tr><tr><td class="line-numbers">4</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">section</span></div></td></tr><tr><td class="line-numbers">5</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-space">    </span><span class="gobbo-lang-token-delimeter-node depth-3">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">clojure</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-operator">!</span><span class="gobbo-lang-token-name-property">wrap</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-3">]</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span></div></td></tr><tr><td class="line-numbers">6</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-space">    </span></div></td></tr><tr><td class="line-numbers">7</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">wrap</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr><tr><td class="line-numbers">8</td><td class="code">&#10;</td></tr><tr><td class="line-numbers">9</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-property">wrap</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>Unlike most programming languages, scopes in Gobbo are not lexical; rather, they are dynamic. This becomes more clear in </span><a class="cross-reference" href="#gobbo-node-sec:macro-con"><span>section </span>3.1.10.2</a><span>.</span></p></section></section><section id="gobbo-node-9b8e006b-6765-4e90-92f7-bbdbbbf31838"><h4><span class="numbering">3.1.10</span><span>Macros</span></h4><p><span>Macros are a special kind of node. A macro transforms, or &#39;expands&#39;, into other nodes.</span></p><p><span>Gobbo&#39;s core has five macros, which will all be discussed in subsections. There is no way to create macros with Gobbo syntax: you&#39;re supposed to do that in the host langauge. In phase 2 you&#39;ll learn how.</span></p><section id="gobbo-node-sec:macro-val"><h5><span class="numbering">3.1.10.1</span><span>Value</span></h5><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">val</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text-escaped">bar</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-keyword">val</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>The </span><code class="inline"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-keyword">val</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></code><span> node transforms into a text node with as content the property value bound to the given name. The example above is equivalent to</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">bar</span></td></tr></tbody></table></div><p><span>The intuition is that in the source you can replace a macro with the content it expands to. This means that </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span> is also applied:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">val</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text-escaped">bar</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">baz</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-keyword">val</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>is equivalent to</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">text</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">baz</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">bar</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div></section><section id="gobbo-node-sec:macro-con"><h5><span class="numbering">3.1.10.2</span><span>Content</span></h5><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-text">bar</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">foo</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>Transforms into the content bound to </span><code class="inline"><span class="gobbo-lang-token-text">foo</span></code><span>, in this case the text node </span><span>bar</span><span>.</span></p><p><span>You can also provide some </span><span style="position: relative;"><span><span>preamble</span></span><span class="highlight-overlay highlight-overlay-prose highlight-group-1"></span></span><span> to the </span><code class="inline"><span class="gobbo-lang-token-text">con</span></code><span> macro, which will be applied to the bound content.</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">hello</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-text">Hello, </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">x</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-text">!</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div class="highlight-container"><span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">hello</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">x</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-text">World</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></span><span class="highlight-overlay">[con hello <span class="highlight-group-1">&lt;con x [World]</span>&gt;]</span><span class="highlight-copy-overlay">[con hello &lt;con x [World]&gt;]</span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div class="highlight-container"><span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">hello</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">x</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-text">Sailor</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></span><span class="highlight-overlay">[con hello <span class="highlight-group-1">&lt;con x [Sailor]</span>&gt;]</span><span class="highlight-copy-overlay">[con hello &lt;con x [Sailor]&gt;]</span></div></td></tr></tbody></table></div><p><span>Is equivalent to</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">Hello, World!</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-text">Hello, Sailor!</span></td></tr></tbody></table></div><p><span>The example above shows that preamble scope is not lexical but dynamic. This example makes that more clear:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">x</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-text">World</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">hello</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-text">Hello, </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">x</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-text">!</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">hello</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">4</td><td class="code"><div class="highlight-container"><span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">hello</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">x</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-text">Sailor</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></span><span class="highlight-overlay">[con hello <span class="highlight-group-3">&lt;con x [Sailor]&gt;</span>]</span><span class="highlight-copy-overlay">[con hello &lt;con x [Sailor]&gt;]</span></div></td></tr></tbody></table></div><p><span>is equivalent to</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">Hello, World!</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-text">Hello, Sailor!</span></td></tr></tbody></table></div><p><span>Line 1 binds some content to </span><code class="inline"><span class="gobbo-lang-token-text">x</span></code><span> in the current </span><i><span>context</span></i><span>.</span></p><p><span>Line 2 binds some content to </span><code class="inline"><span class="gobbo-lang-token-text">hello</span></code><span>. On line 3, the evaluation of the document &#39;jumps&#39; to the content bound to </span><code class="inline"><span class="gobbo-lang-token-text">hello</span></code><span>, taking the current context with it. In this context, the content bound to </span><code class="inline"><span class="gobbo-lang-token-text">x</span></code><span> is </span><code class="inline"><span class="gobbo-lang-token-text">World</span></code><span>.</span></p><p><span style="position: relative;"><span><span>On line 4, before the jump happens</span></span><span class="highlight-overlay highlight-overlay-prose highlight-group-3"></span></span><span>, the context is augmented: the content bound to </span><code class="inline"><span class="gobbo-lang-token-text">x</span></code><span> is overridden by other content. Now this new context, with a different binding to </span><code class="inline"><span class="gobbo-lang-token-text">x</span></code><span>, is brought along for the jump to the content bound to </span><code class="inline"><span class="gobbo-lang-token-text">hello</span></code><span>. Now the content bound to </span><code class="inline"><span class="gobbo-lang-token-text">x</span></code><span> is </span><code class="inline"><span class="gobbo-lang-token-text">Sailor</span></code><span>.</span></p><p><span>So far I&#39;ve experienced that </span><code class="inline"><span class="gobbo-lang-token-text">con</span></code><span> works best for small things. If you really want to combine nodes in a reusable way then you might be better off writing a macro or using </span><a class="cross-reference" href="#gobbo-node-sec:macro-include"><span>the </span><code class="inline"><span class="gobbo-lang-token-text">include</span></code><span> macro</span></a><span>.</span></p></section><section id="gobbo-node-sec:macro-preamble"><h5><span class="numbering">3.1.10.3</span><span>Preamble</span></h5><p><span>Preamble comes before content, but sometimes you want to apply preamble only to part of your content somewhere in the middle. For example, you mostly write about Gobbo code, but somewhere halfway you have a couple of Clojure code blocks. You could use classes, or instead of writing this:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">clojure</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">4</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">clojure</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">5</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>You could write this:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">clojure</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">4</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span></div></td></tr><tr><td class="line-numbers">5</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr><tr><td class="line-numbers">6</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>A node without node type, classes or properties but with preamble before its content is a </span><i><span>preamble macro</span></i><span>. It expands into its content, but with the preamble applied.</span></p><p><span>If the content of a preamble macro is pretty small, like it is in the previous example, then it becomes less dangerous to use the wildcard versions of </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">cla</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span> and </span><code class="inline"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></code><span> because you can tell at a glance all nodes that are affected:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">gobbo</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">3</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-comment">/* no types: wild! */</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">clojure</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">4</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span></div></td></tr><tr><td class="line-numbers">5</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr><tr><td class="line-numbers">6</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div></section><section id="gobbo-node-sec:macro-include"><h5><span class="numbering">3.1.10.4</span><span>Include</span></h5><p><span>Let&#39;s say your document&#39;s project directory contains these files (and the </span><span class="directory-inline"><span>examples</span></span><span> directory):</span></p><div class="code-block"><div class="title"><span>doc</span></div><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="code">main.gobbo</td></tr><tr><td class="code">secondary.gobbo</td></tr><tr><td class="code">examples</td></tr><tr><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;">  1.gobbo</div></td></tr><tr><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;">  2.gobbo</div></td></tr></tbody></table></div><div class="code-block"><div class="title"><span>main.gobbo</span></div><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">include</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">secondary.gobbo</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-text">!</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">include</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">examples/1.gobbo</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><div class="code-block"><div class="title"><span>secondary.gobbo</span></div><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">Greetings from secondary</span></td></tr></tbody></table></div><div class="code-block"><div class="title"><span>examples/1.gobbo</span></div><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">&#39;</span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">include</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">2.gobbo</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-text">&#39; and &#39;</span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">include</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">../secondary.gobbo</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-text">&#39;</span></td></tr></tbody></table></div><div class="code-block"><div class="title"><span>examples/2.gobbo</span></div><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">include</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">/secondary.gobbo</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>Then </span><code class="inline"><span class="gobbo-lang-token-text">main.gobbo</span></code><span> would be equivalent to</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">Greeting from secondary!</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-text">&#39;Greetings from secondary&#39; and &#39;Greetings from secondary&#39;</span></td></tr></tbody></table></div><p><span>The </span><code class="inline"><span class="gobbo-lang-token-text">include</span></code><span> macro is similar to the </span><code class="inline"><span class="gobbo-lang-token-text">con</span></code><span> macro in that it expands into content defined elsewhere. In case of </span><code class="inline"><span class="gobbo-lang-token-text">include</span></code><span>, this content is defined in a different file.</span></p><p><span>Contrary to the </span><code class="inline"><span class="gobbo-lang-token-text">val</span></code><span>, </span><code class="inline"><span class="gobbo-lang-token-text">con</span></code><span> and preamble macros, </span><code class="inline"><span class="gobbo-lang-token-text">include</span></code><span> does take classes and properties. Currently the only used (and main) property is </span><code class="inline"><span class="gobbo-lang-token-text">path</span></code><span>.</span></p><p><span>You can specify either a relative or absolute path. Relative paths are relative to the &#39;current&#39; file, the file where the </span><code class="inline"><span class="gobbo-lang-token-text">include</span></code><span> macro resides. Absolute paths start at the project root (</span><span class="directory-inline"><span>doc</span></span><span>).</span></p><p><span>Like the </span><code class="inline"><span class="gobbo-lang-token-text">con</span></code><span> macro, </span><code class="inline"><span class="gobbo-lang-token-text">include</span></code><span> allows you to specify preamble that will be applied to the expanded content. Given the file</span></p><div class="code-block"><div class="title"><span>hello.gobbo</span></div><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><div style="text-indent: -1ch; padding-left: 1ch;"><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Hello, </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">x</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-text">!</span></div></td></tr></tbody></table></div><p><span>then</span></p><div class="code-block"><div class="title"><span>main.gobbo</span></div><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">include</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">hello.gobbo</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">x</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-text">World</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">include</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">hello.gobbo</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">x</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-text">Sailor</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>would be equivalent to</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">Hello, World!</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-text">Hello, Sailor!</span></td></tr></tbody></table></div><p><span>Not that even without specifying preamble inside the </span><code class="inline"><span class="gobbo-lang-token-text">include</span></code><span> macro, the context in which </span><code class="inline"><span class="gobbo-lang-token-text">include</span></code><span> is evaluated is still passed to </span><span class="directory-inline"><span>hello.gobbo</span></span><span>:</span></p><div class="code-block"><div class="title"><span>main.gobbo</span></div><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">con</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-name-binding">x</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-text">World</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">include</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">hello.gobbo</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>would be equivalent to</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-text">Hello, World!</span></td></tr></tbody></table></div></section><section id="gobbo-node-590ed0de-c08d-4a2d-8b3f-54c1cfc0c260"><h5><span class="numbering">3.1.10.5</span><span>Read</span></h5><p><span>Like </span><code class="inline"><span class="gobbo-lang-token-text">include</span></code><span>, the </span><code class="inline"><span class="gobbo-lang-token-text">read</span></code><span> macro has </span><code class="inline"><span class="gobbo-lang-token-text">path</span></code><span> as its main property. The difference is that </span><code class="inline"><span class="gobbo-lang-token-text">read</span></code><span> doesn&#39;t evaluate the file&#39;s content as Gobbo code, but rather expands into a single text node with as content the file&#39;s cotent. Mostly used inside code blocks:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">code-block</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-name-node-type">read</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-operator">=</span><span class="gobbo-lang-token-text-escaped">main.gobbo</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></td></tr></tbody></table></div><p><span>If you do not specify a value for </span><code class="inline"><span class="gobbo-lang-token-text">path</span></code><span>, then the current file is read (see the last line of the code block in </span><a class="cross-reference" href="#gobbo-node-this-page-in-gobbo"><span>Appendix </span>A</a><span>).</span></p></section><section id="gobbo-node-2ea08578-20b5-4024-a5b9-9f55af867830"><h5><span class="numbering">3.1.10.6</span><span>Lines</span></h5><p><span>Line semantics are preserved:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">list</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-text">One</span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">item</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">flag</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></div></td></tr><tr><td class="line-numbers">4</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-space">    </span><span class="gobbo-lang-token-delimeter-node depth-3">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">item</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Two</span><span class="gobbo-lang-token-delimeter-node depth-3">]</span></div></td></tr><tr><td class="line-numbers">5</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-space">    </span><span class="gobbo-lang-token-delimeter-node depth-3">[</span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">item</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-text">Three</span><span class="gobbo-lang-token-delimeter-node depth-3">]</span></div></td></tr><tr><td class="line-numbers">6</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-text">Four</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span><span class="gobbo-lang-token-no-parse"></span></div></td></tr></tbody></table></div><p><span>Will result in a list of which the middle two items have the property </span><code class="inline"><span class="gobbo-lang-token-text">flag</span></code><span> set to </span><code class="inline"><span class="gobbo-lang-token-text">true</span></code><span>.</span></p><p><span>Beware:</span></p><div class="code-block"><table class="code-block wrap" style="tab-size: 2;"><tbody><tr><td class="line-numbers" style="width: 1ch;">1</td><td class="code"><span class="gobbo-lang-token-delimeter-node depth-1">[</span><span class="gobbo-lang-token-name-node-type">list</span></td></tr><tr><td class="line-numbers">2</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-text">One</span></div></td></tr><tr><td class="line-numbers">3</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-delimeter-node depth-2">[</span><span class="gobbo-lang-token-delimeter-preamble">&lt;</span><span class="gobbo-lang-token-keyword">def</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-child">\</span><span class="gobbo-lang-token-name-node-type">item</span><span class="gobbo-lang-token-space"> </span><span class="gobbo-lang-token-delimeter-properties">{</span><span class="gobbo-lang-token-name-property">flag</span><span class="gobbo-lang-token-delimeter-properties">}</span><span class="gobbo-lang-token-delimeter-preamble">&gt;</span></div></td></tr><tr><td class="line-numbers">4</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-space">    </span><span class="gobbo-lang-token-text">Two</span></div></td></tr><tr><td class="line-numbers">5</td><td class="code"><div style="text-indent: -4ch; padding-left: 4ch;"><span class="gobbo-lang-token-space">    </span><span class="gobbo-lang-token-text">Three</span><span class="gobbo-lang-token-delimeter-node depth-2">]</span></div></td></tr><tr><td class="line-numbers">6</td><td class="code"><div style="text-indent: -2ch; padding-left: 2ch;"><span class="gobbo-lang-token-space">  </span><span class="gobbo-lang-token-text">Four</span><span class="gobbo-lang-token-delimeter-node depth-1">]</span></div></td></tr></tbody></table></div><p><span>Will still result in a list with four items, as expected, but the middle two items will NOT have the property </span><code class="inline"><span class="gobbo-lang-token-text">flag</span></code><span> set to </span><code class="inline"><span class="gobbo-lang-token-text">true</span></code><span>.</span></p><p><span>The the preamble macro is expanded first, resulting in two lines each containing a text node. The preamble regarding \item nodes had no effect because during evaluation of the preamble macro, there were no \item nodes.</span></p><p><span>The two lines resulting from the preamble macro are then consumed by the list node: only now are the lines transformed into \item nodes.</span></p><p><span>Something to keep in mind: preamble works outside-in, whereas the evaluation of nodes works inside-out.</span></p><p><span>This is definitely something I want to fix. The intuition of macro is supposed to be that the macro is transparent, like the macro is not really there. Content inside a macro should behave exactly the same is it would outside a macro. </span></p></section><section id="gobbo-node-bf111a09-2ca6-4281-8084-2bc44c36f3c1"><h5><span class="numbering">3.1.10.7</span><span>Fallback</span></h5></section></section></section><section id="gobbo-node-472e5343-27e8-4087-b0a0-5a0570b65677"><h3><span class="numbering">3.2</span><span>Nodes</span></h3><section id="gobbo-node-sec:node-text"><h4><span class="numbering">3.2.1</span><span>Text</span></h4></section><section id="gobbo-node-sec:node-ref"><h4><span class="numbering">3.2.2</span><span>Cross reference</span></h4><p><span>Can&#39;t have the numbered group&#39;s be injected automatically because heavily subject to grammar and choice. Sections 1 and 2, Section 1 and section 2...</span></p><p><span>First it was just the number. Then added link to the rendered reference. Then thought: hmm, would like to be able to click on more than just the number, e.g. also the word section. Number would be always on the right. Then though: hey wait a minute, something I don&#39;t event want to mention the number. Number there because in print, you can&#39;t click, so you need the number to look up where to go, but digitally you can just click. So number is now optional, but its order within the rest of the content matters. So number child type, reference is list-kinded.</span></p><p><span>However, currently must provide the </span><code class="inline"><span class="gobbo-lang-token-text">\number</span></code><span> node as a direct child of the </span><code class="inline"><span class="gobbo-lang-token-text">ref</span></code><span> node. So can&#39;t do something like </span><span>[ref Bold [b [\number]]]</span><span>, because </span><code class="inline"><span class="gobbo-lang-token-text">\number</span></code><span> is direct child of </span><code class="inline"><span class="gobbo-lang-token-text">b</span></code><span>. Currently in the process of coming up with a solution to this.</span></p></section><section id="gobbo-node-sec:node-list"><h4><span class="numbering">3.2.3</span><span>List</span></h4></section><section id="gobbo-node-9fecc494-3766-4ebb-8ecd-b1688a5e595a"><h4><span class="numbering">3.2.4</span><span>Code</span></h4></section><section id="gobbo-node-e66efc74-3f3f-4ff3-98df-af3870b0a7d6"><h4><span class="numbering">3.2.5</span><span>Terminal</span></h4></section></section></section><section id="gobbo-node-d92c88e5-cf62-4b3d-b1fe-b1cfd792ee2b"><h2><span class="numbering">4</span><span>The tool</span></h2><p><span>On numbering, TOC etc.</span></p><p><span>assets</span></p></section><section id="gobbo-node-4efe35b1-2d1c-4ff6-99de-4643050f02ac"><h2><span class="numbering">5</span><span>Footguns</span></h2></section><section id="gobbo-node-14d14629-e996-4f79-9261-9a903aef7615"><h2><span class="numbering">6</span><span>Wrapping up</span></h2></section><section id="gobbo-node-09d2b80d-6b50-4ae2-b286-c88ab2f0ceac"><h2><span class="numbering">7</span><span>Closing thoughts</span></h2><p><span>After writing a lot in Markdown, was getting annoyed. Latex no option because pages. Event that triggered me to start with this project was accepting a job as a part-time teacher to 15-19 year olds. I dreaded the prospect of receiving their ill formatted reports! I knew especially blocks of code were going to be a problem.</span></p><p><span>I wanted them to be able to hand in as little as possible, such that as little as possible could go wrong. Many things I could add programatically: the name of the project, the authors&#39; names, the date. They wouldn&#39;t even have to do any styling. </span></p><p><span>They would receive a skeleton source project and a rendering tool for them to preview their work with. They would not deliver a built artifact but only their source project, now containing the content the had written, and only that. I would use the exact same rendering tool to build the actual artifacts I would grade.</span></p><p><span>I would even be able to programatically analyze their work and possibly reject it if it failed to meet certain criteria, such as the presence of certain specifically entitled sections.</span></p><p><span>I had four weeks or so to work on this project before classes started. When they did start I was far from finished. My students had to use existing tools, which they knew poorly, and indeed mostly delivered work that brought the wrong kind of tears to my eyes. Worst of all, and I knew this was going to happen, too many of them DIDN&#39;T INCLUDE THE CORRECT TITLE, AAAAAAH!</span></p><p><span>More importantly, I wanted them to have great writing tools so they would enjoy writing and spend their energy on crafting something great, rather than spending it on dealing with frustratingly frictive tooling.</span></p><p><span>Also, I knew I would be getting a fellow teacher who is about two decades older than I am and would perhaps be inclined to want to print on paper the reports of the students we would share. I wanted to make sure our students could write a single source which I could render as a digital artifact for me, and as a printable version for my colleague.</span></p><p><span>Ironically I found time to continue this project because I quit the teaching job. Nevertheless, I have kept these goals in mind and are still totally within reach.</span></p></section><section id="gobbo-node-this-page-in-gobbo"><h2><span class="numbering">Appendix A</span><span>This page in Gobbo</span></h2><p><span> </span></p></section></div>
  </div>
</body>

</html>